{% extends "base.html" %}
{% load math_extras %}

{% block content %}
<div class="container-fluid">
    <h1 class="mt-4">Actionable Financial Insights</h1>
    
    <!-- Key Metrics -->
    <div class="row mt-4">
        <div class="col-md-4">
            <div class="card bg-primary text-white mb-4">
                <div class="card-body">
                    <h5>30-Day Income</h5>
                    <h2>₹{{ total_income|floatformat:2 }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-danger text-white mb-4">
                <div class="card-body">
                    <h5>30-Day Expenses</h5>
                    <h2>₹{{ total_expenses|floatformat:2 }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-success text-white mb-4">
                <div class="card-body">
                    <h5>Net Cash Flow</h5>
                    <h2>₹{{ total_income|subtract:total_expenses|floatformat:2 }}</h2>
                </div>
            </div>
        </div>
    </div>

    <!-- Insights Card -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h5 class="m-0 font-weight-bold text-primary">
                <i class="fas fa-lightbulb"></i> AI-Generated Action Plan
            </h5>
        </div>
        <div class="card-body">
            <div class="insights-content" style="white-space: pre-line">
                {{ insights }}
            </div>
            
            <hr>
            
            <div class="mt-3">
                <button class="btn btn-primary">
                    <i class="fas fa-download"></i> Export as PDF
                </button>
                <button class="btn btn-success ml-2">
                    <i class="fas fa-tasks"></i> Create Action Items
                </button>
            </div>
        </div>
    </div>
</div>

<style>
.insights-content {
    line-height: 1.8;
    font-size: 1.1rem;
}
.insights-content h2 {
    color: #2c3e50;
    margin-top: 1.5rem;
    margin-bottom: 1rem;
}
.insights-content ul {
    padding-left: 2rem;
}
</style>
{% endblock %}